# DeMart 产品设计文档 (Product Requirement Document)

> **文档状态**: `V1.0 规划中`
> **更新日期**: `2024-08-02`
> **负责人**: `资深产品经理`

---

## 1. 产品概述与愿景 (不变)

### 1.1. 产品简介
DeMart 是一个基于区块链技术的去中心化 C2C (Consumer-to-Consumer) 交易平台。用户可以在平台上自由交易实体商品、在线服务或虚拟物品。平台利用稳定币 (Stablecoin) 作为主要交易媒介，并通过智能合约实现交易资金的托管与担保，旨在打造一个更安全、更低成本、更透明的全球化C2C市场。

### 1.2. 产品愿景
我们的愿景是构建一个由社区驱动、无需第三方信任、无国界限制的自由交易市场。通过移除中心化机构的干预，将价值和权利真正交还给买卖双方，让每一次交易都简单、可靠。

### 1.3. 产品定位与目标

**一句话定位**: 一个类似"闲鱼"模式的去中心化C2C闲置与服务交易平台。

**目标市场**:
*   **初期**: 面向熟悉并持有加密货币的用户，特别是那些寻求更高交易自主性和更低交易成本的用户群体。
*   **长期**: 逐步降低使用门槛，吸引更广泛的传统电商用户，成为Web3时代的主流C2C交易平台之一。

### 1.4. 核心解决的问题 (Pain Points)

DeMart 致力于解决当前C2C交易市场（尤其是中心化平台）存在的以下核心问题：

| 问题点 (Pain Point) | 中心化平台现状 | DeMart 解决方案 (Decentralized Solution) |
| :--- | :--- | :--- |
| **信任成本高** | 依赖平台作为信用背书，但平台本身可能存在数据滥用、规则不透明等问题。 | 通过公开、不可篡改的智能合约来执行交易规则，代码即法律，建立程序化的信任。 |
| **交易成本高** | 平台通常会抽取较高比例的佣金（例如 5%-20%）来维持运营和盈利。 | 去中心化运营极大降低了维护成本，平台仅收取极低的费用（或初期不收费）以维持协议运行。 |
| **资金结算慢** | 资金通常有较长的结算周期，且提现流程繁琐，受银行和支付网关限制。 | 使用稳定币交易，资金在买家确认后即刻通过智能合约划转至卖家钱包，实现近乎实时的全球结算。 |
| **审查与限制** | 平台基于自身规则和地区法规，对可上架的商品类型有严格限制，缺乏灵活性。 | 赋予用户更高的自主权，只要交易内容合法合规，社区可以自由决定上架的商品与服务类型。 |
| **单点故障风险** | 中心化服务器一旦宕机或被攻击，整个平台将陷入瘫痪。 | 核心逻辑部署在区块链上，数据分布式存储（例如使用 IPFS），具备高可用性和抗审查能力。 | 

---

## 2. V1.0 核心策略：Web2 功能原型

为了快速验证核心业务流程和用户体验，V1.0 版本将采取**Web2功能原型优先**的策略。

*   **搁置Web3集成**: 暂时不直接集成钱包连接、智能合约调用或真实的链上交易。
*   **模拟区块链交互**: 所有与链上相关的环节，特别是支付流程，将采用**高保真模拟**的方式实现，以确保数据结构和用户体验与未来版本兼容。
*   **核心重点**: 集中资源开发和打磨以**即时聊天(IM)为核心的C2C交易全流程**，包括用户系统、商品展示、聊天沟通、订单生成和（模拟）支付。

---

## 3. 用户角色与场景分析 (不变)

### 2.1. 用户角色 (User Personas)

在 DeMart 平台中，一个用户可以同时扮演卖家和买家的角色。为了更好地理解他们的需求和行为，我们构建以下两个核心用户画像：

**角色一：卖家 (Seller) - Alex**

*   **背景**: 28岁，一名居住在东南亚的自由职业设计师。他是加密货币早期采用者，对 Web3 技术充满热情。
*   **行为特征**:
    *   经常在各种平台上出售自己的设计服务和一些闲置的电子产品。
    *   对个人数据隐私非常敏感。
    *   熟悉使用加密钱包（如 MetaMask）进行转账。
    *   愿意尝试新平台，尤其是那些能提供更低交易费用和更高自主性的平台。
*   **目标 (Goals)**:
    *   快速、轻松地发布自己的商品或服务。
    *   以稳定币的形式获得收入，避免法币汇率波动和复杂的国际收款流程。
    *   以尽可能低的成本完成交易。
    *   建立自己的个人品牌和信誉。
*   **痛点 (Pain Points)**:
    *   传统平台佣金太高，侵蚀了利润。
    *   收款周期长，国际收款手续繁琐且费用高昂。
    *   担心平台随意下架自己的商品或封禁账户。

**角色二：买家 (Buyer) - Bella**

*   **背景**: 22岁，一名在美国的大学生。她对数字时尚和虚拟商品很感兴趣，并持有一些稳定币用于小额投资和支付。
*   **行为特征**:
    *   喜欢寻找独特和小众的商品，包括虚拟物品和独立设计师的作品。
    *   对交易安全非常看重，担心遇到欺诈卖家（付款不发货）。
    *   希望购物体验流畅、简单，不希望有复杂的注册和验证流程。
*   **目标 (Goals)**:
    *   安全地购买商品，确保在收到货之前资金是受保护的。
    *   能够方便地使用自己持有的稳定币进行支付。
    *   能够查看卖家的信誉历史，以辅助购买决策。
    *   在发生纠纷时，有一个公平、透明的裁决机制。
*   **痛点 (Pain Points)**:
    *   在传统C2C平台遇到过诈骗，付了款但卖家消失了。
    *   跨境购买时，支付方式受限，且运费和关税不透明。
    *   担心自己的购买历史和个人信息被平台泄露。

### 2.2. 核心用户故事 (Key User Stories)

| 作为... (As a...) | 我想要... (I want to...) | 以便... (So that...) |
| :--- | :--- | :--- |
| **一个新用户** | 通过连接我的加密钱包快速创建账户 | 无需经历传统平台繁琐的手机/邮箱注册和KYC流程。 |
| **卖家 (Seller)** | 通过简单的表单（标题、描述、图片、价格）发布一件商品 | 快速将我的闲置物品或服务上架销售。 |
| **卖家 (Seller)** | 自定义我的个人主页，展示我正在出售的所有商品 | 打造我的个人店铺品牌，方便买家浏览。 |
| **卖家 (Seller)** | 在买家确认收货后，资金能立刻转入我的钱包 | 快速回笼资金，避免漫长的结算等待。 |
| **买家 (Buyer)** | 按分类或通过关键词搜索我感兴趣的商品 | 高效地找到我想要购买的东西。 |
| **买家 (Buyer)** | 在支付后，我的资金被一个可信的第三方（智能合约）托管 | 防止卖家收到钱后不发货，保障我的资金安全。 |
| **买家 (Buyer)** | 查看卖家的历史交易记录和收到的评价 | 评估卖家的可信度，做出更明智的购买决策。 |
| **买家 (Buyer)** | 在收到不满意的商品时，可以方便地发起退款或申诉 | 保护我的消费者权益。 |

---

## 4. 核心业务流程 (V1.0)

### 4.1. V1.0 整体交易流程图 (更新)

新的流程强调了从聊天到下单的路径。

```mermaid
graph TD
    subgraph 用户
        A[注册/登录] --> C[查看商品详情];
        C --> D{点击"聊一聊"};
        D --> E[进入聊天界面];
        E -- 沟通后 --> F{点击"立即购买"};
        F --> G[创建订单];
        G --> H[选择/填写收货地址];
        H --> I{确认并模拟支付};
        I --> J[等待"链上"确认];
        J --> K[支付成功];
        K -- 等待卖家发货 --> L;
        L[收到商品] --> M{确认收货};
        M --> N[评价卖家];
    end

    subgraph 卖家
        O[发布商品]
        D -- 接收到新消息 --> E;
        K -- 收到订单通知 --> P[发货];
        M -- 资金到账(模拟) --> Q[完成交易];
    end
```

---

## 5. 功能规格 (V1.0)

本章节详细定义 V1.0 的核心功能。

### 5.1. 用户与身份模块 (更新)

| 功能点 | 描述 | 备注 |
| :--- | :--- | :--- |
| **基础认证** | 用户通过**邮箱和密码**进行注册和登录。Web3钱包连接将在后续版本引入。 | 推荐使用 NextAuth.js 等成熟的认证库。密码需要加密存储。 |
| **用户主页** | 每个用户拥有一个个人主页，展示其昵称、头像、在售商品和收到的评价。 | URL 可以设计为 `demart.com/profile/[username]`。 |
| **编辑个人资料** | 用户可以自定义其主页上显示的昵称和头像。 | |
| **收货地址管理**| 用户可以在个人中心添加、编辑、删除多个收货地址。 | 在下单时可以方便地选择地址。需要将一个地址设为默认。 |

### 5.2. 商品模块 (基本不变)

| 功能点 | 描述 | 备注 |
| :--- | :--- | :--- |
| **发布商品** | 卖家可以填写表单来发布新商品，包含：标题、描述、上传图片、设定价格（以稳定币计价）、商品分类、以及**商品所在地理位置（国家/地区）**。 | 商品的元数据（描述、图片链接）将存储在 IPFS 上，并将 IPFS 的哈希值记录在链上，确保内容不可篡改。对于虚拟商品/服务，地理位置可设为"全球/不适用"。 |
| **商品详情页** | 展示商品的详细信息。将原有的"立即购买"按钮替换为更主要的 **"聊一一"** 按钮和一个次要的"直接购买"按钮。 | 核心引导用户先沟通，再交易，符合C2C平台特性。 |
| **管理商品** | 卖家可以编辑或下架自己已发布的商品。 | 编辑操作会产生新的IPFS记录，并在链上更新哈希。 |
| **浏览历史** | 记录用户最近浏览过的商品，并在个人中心提供"浏览记录"页面查看。 | 使用客户端存储（localStorage）实现，无需登录即可使用。每个商品记录包含：商品ID、标题、主图、价格和浏览时间。 |

### 5.3. 即时聊天(IM)模块 (新增)

| 功能点 | 描述 | 备注 |
| :--- | :--- | :--- |
| **发起聊天** | 在商品详情页，买家点击"聊一聊"按钮，即可创建或进入一个与卖家的、围绕当前商品的聊天会话。 | |
| **聊天界面** | 界面包含：标准的消息流、文本和图片输入框、顶部的**关联商品信息栏**。 | 关联商品信息栏能让双方明确沟通的是哪个商品，并包含关键信息（图、标题、价格）。 |
| **实时消息** | 使用 WebSocket (如 Socket.io) 技术，实现买卖双方的实时消息收发。 | 需要考虑离线消息的存储和推送。 |
| **系统通知** | **(新增)** 聊天窗口内除了用户消息，还支持**系统消息**。当特定事件发生时（如卖家修改价格），系统会自动向聊天会话中插入一条通知。 | 这类消息需要有独特的UI样式，以区别于用户消息。 |
| **从聊天中下单** | 在聊天界面的关联商品栏中，有一个醒目的 **"立即购买"** 按钮。点击后，系统带入商品信息，直接进入订单确认页面。 | 这是V1.0的核心流程之一，旨在提供流畅的购买体验。 |

### 5.4. 交易与支付模块 (更新)

| 功能点 | 描述 | 备注 |
| :--- | :--- | :--- |
| **创建订单** | 买家通过商品详情页或聊天界面发起购买。订单创建后，初始状态为 `AWAITING_PAYMENT` (待支付)。 | |
| **支付前价格修改** | **(新增)** 订单处于 `AWAITING_PAYMENT` 状态时，**卖家**有权在聊天界面或订单管理页修改订单金额。 | 这是实现交易协商的关键功能。 |
| | 1. **权限**: 只有卖家可以修改，且只能在买家支付前修改。 | |
| | 2. **执行**: 卖家输入新价格并确认。 | |
| | 3. **通知**: 系统更新订单金额，并立即通过WebSocket向对应的聊天窗口发送一条**系统通知**，例如："卖家已将价格修改为 95.00 USDC"。 | 确保买家能实时获取价格变动信息。 |
| **订单确认页** | 页面展示订单的商品信息、总价，并提供**收货地址选择/编辑**功能。如果价格被卖家修改，此页面的金额需要实时更新。 | |
| **高保真模拟支付** | 用户点击"确认支付"后，**无需调用真实钱包**，系统将执行以下高保真模拟流程： | 这是保障未来平滑过渡到Web3的关键。 |
| | 1. **生成模拟哈希**: 后端立即为订单生成一个随机的、格式正确的交易哈希 (Fake TxHash)。 | 例如: `0x[64位随机十六进制字符]` |
| | 2. **进入待确认**: 订单状态更新为 `PENDING_CONFIRMATION` (等待链上确认)。UI上显示"交易已提交，等待区块链确认..."和模拟哈希。 | |
| | 3. **模拟延迟**: 系统随机延迟 5-15 秒，模仿区块链确认时间。 | |
| | 4. **确认成功**: 延迟结束后，订单状态更新为 `PAYMENT_CONFIRMED` (即"待发货")。UI提示支付成功。 | |
| **订单状态管理**| 包含完整的订单生命周期：`AWAITING_PAYMENT` -> `PENDING_CONFIRMATION` -> `PAYMENT_CONFIRMED` (待发货) -> `SHIPPED` (待收货) -> `COMPLETED` -> `CANCELLED`。 | 状态机更加完善。 |
| **我的订单页**| 用户可以在个人中心查看自己所有的买/卖订单列表及其当前状态。 | |

### 5.5. 信誉与评价系统 (不变)

| 功能点 | 描述 | 备注 |
| :--- | :--- | :--- |
| **交易后互评** | 交易完成后（资金已释放），买卖双方可以相互留下评价（例如1-5星）和文字评论。 | 评价内容和星级将记录在链上，与该笔交易绑定，确保真实可追溯。 |
| **信誉分计算** | 用户的信誉分将基于其收到的所有评价进行加权平均计算。 | 信誉分直接展示在用户的个人主页和商品详情页，作为其他用户的决策参考。 |

### 5.6. 浏览历史模块 (新增)

| 功能点 | 描述 | 备注 |
| :--- | :--- | :--- |
| **自动记录浏览** | 当用户查看商品详情页面时，系统自动记录该商品到浏览历史中。 | 使用客户端存储（localStorage）实现，确保即使未登录的用户也能使用此功能。 |
| **浏览历史页面** | 用户可以在个人中心访问"浏览记录"页面，查看最近浏览过的商品列表。 | 列表按照浏览时间倒序排列，最近浏览的商品显示在最前面。 |
| **历史记录管理** | 用户可以清空全部浏览记录，或删除单个浏览记录。 | 操作仅影响本地存储的数据。 |
| **数据存储结构** | 每条浏览记录包含：商品ID、标题、主图URL、价格和浏览时间。 | 为避免存储过大，可限制最多保存50条记录。当超过限制时，自动删除最早的记录。 |
| **导航入口** | 在导航栏中添加"浏览记录"入口，替换原有的"浏览商品"按钮。 | 入口旁可显示未读数字角标，提示用户自上次查看后新增的浏览记录数量。 |

---

## 6. 技术架构思考 (更新)

### 6.1. 核心原则

*   **安全第一**: 智能合约必须经过严格的审计，用户的资金安全是最高优先级。
*   **去中心化与性能的平衡**: 并非所有数据和逻辑都需要上链。应将核心的、需要信任保障的逻辑（如资金托管、交易状态机）放在链上，而将其他辅助性功能（如商品搜索、用户资料）置于链下，以平衡去中心化、成本和用户体验。
*   **用户体验优先**: 尽可能降低Web3操作的复杂性，让不熟悉加密钱包的用户也能相对顺畅地使用。

### 6.2. V1.0 技术栈建议 (更新)

| 层面 | 建议技术 | 理由 |
| :--- | :--- | :--- |
| **前端框架** | Next.js (React) | 保持不变。 |
| **认证** | **NextAuth.js** | 提供了完整的用户认证解决方案，支持多种Provider，便于未来扩展。 |
| **即时通讯** | **Socket.io** / **PartyKit** | Socket.io 是成熟的 WebSocket 库。PartyKit 是一个新兴的、专为现代应用设计的实时协作平台，值得考虑。 |
| **数据库** | PostgreSQL + Prisma | Prisma 提供了优秀的类型安全ORM，与Next.js配合良好。PostgreSQL是功能强大的关系型数据库。|
| **UI/UX** | Tailwind CSS + Shadcn/ui | 保持不变。 |
| **Web3 (模拟)**| - | 当前阶段不引入 `wagmi`/`viem` 等库，以保持项目轻量。模拟逻辑在后端实现。|

### 5.3. 关于 Gas 费的思考

Gas 费是用户在区块链上执行操作所需支付的费用，是去中心化应用必须面对的用户体验挑战。

*   **网络选择**: 如上所述，选择Layer2是降低Gas费最有效的手段。
*   **合约优化**: 在开发智能合约时，应精简化设计，避免不必要的链上写入操作，以降低执行成本。例如，将多个状态更新捆绑在一次交易中。
*   **Gasless (无Gas) 交易**: 长期来看，可以探索使用账户抽象 (Account Abstraction) 或元交易 (Meta-transactions) 等技术。平台可以为特定操作（如首次发布商品、留下评价）代付Gas费，以极大地改善新用户的体验。这可以作为后续版本的功能规划。

---

## 7. 后续迭代计划 (更新)

### V1.0: Web2 功能原型 (当前)
*   完成上述所有功能。

### V1.1: Web3 集成
*   引入 `wagmi` 和 `viem`。
*   将用户认证系统与钱包连接打通（允许两种登录方式并存）。
*   将高保真模拟支付替换为真实的智能合约调用流程。
*   开发资金托管智能合约。

### V2.0 及更远...
*   去中心化争议仲裁... (后续规划保持不变) ...

---

## 8. 安全、合规与信任策略 (Safety, Compliance & Trust)

去中心化平台面临的核心挑战之一是如何在保障用户隐私和自由的同时，防范非法活动并建立生态信任。本章节阐述 DeMart 在此方面的多层次策略。

### 7.1. 核心原则

*   **提高作恶门槛，而非追求完全杜绝**: 在开放的去中心化网络中，无法100%杜绝非法活动。我们的策略核心是，通过技术和经济模型的设计，极大地提高违法成本，使其得不偿失。
*   **分层防御**: 结合链上分析、中心化预警和社区治理，构建一个纵深防御体系。
*   **有限的中心化妥协**: 为了保护绝大多数善意用户和平台的长期发展，在特定环节（如入口准入、内容预警）采用必要的中心化手段是可以接受的。

### 7.2. 多层次安全与合规框架

**第一层：准入层 - 链上身份与资金分析 (MVP)**

*   **功能**: 在用户连接钱包时，通过集成第三方链上分析工具（如 Chainalysis, TRM Labs）的API，对钱包地址进行风险评估。
*   **规则**:
    *   **高风险地址**: 若地址被标记为与混币器、暗网、被盗资金或受制裁实体直接关联，前端将直接阻止其登录和使用平台。
    *   **中风险地址**: 允许登录，但限制发布商品等高风险操作。
    *   **低风险/合规地址**: 授予全部功能权限。
*   **目的**: 从源头上筛选掉高风险参与者，保障平台基础安全。

**第二层：内容层 - AI内容预警 (MVP)**

*   **功能**: 在卖家提交商品信息时，其上传的图片和文本描述将先通过中心化的AI服务进行扫描。
*   **规则**: 利用成熟的云服务（如 Google Vision AI）或自训练模型，识别涉及违禁品（毒品、武器）、暴力、色情等内容。
*   **处理**: 若检测到高风险内容，则直接阻止本次发布，并向卖家返回"内容不合规"的提示。商品元数据不会被上传至IPFS或上链。
*   **目的**: 自动化、前置化地拦截大部分明目张胆的非法商品。

**第三层：社区层 - 去中心化举报与仲裁 (中期路线图)**

*   **功能**: 赋予社区用户监督和治理的权利。
*   **举报机制**:
    *   用户可在商品页面点击"举报"。
    *   举报时需质押少量资金（Stake-to-Report），以防止恶意举报。
*   **仲裁机制**:
    *   被举报的商品将进入去中心化仲裁流程（可集成 Kleros 等第三方协议）。
    *   由质押代币的社区"陪审员"对举报进行投票。
*   **执行**:
    *   若举报成立，举报者收回质押并获得奖励，作恶卖家的信誉分降低或地址被标记；被举报商品将从前端索引中移除。
    *   若举报不成立，举报者的质押金将被没收一部分给被举报者作为补偿。
*   **目的**: 依靠集体智慧，实现生态的长期、可持续治理和净化。 

---

## 8. 社区治理与内容审查模型 (Community Governance & Curation Model)

本章节深入探讨DeMart如何利用集体智慧，构建一个强大且可行的社区自我调节机制。这是平台长期健康发展的基石。

### 8.1. 治理理念

*   **渐进式去中心化**: 平台启动初期由核心团队引导，随着社区的成熟，逐步将权力移交给由代币持有者组成的DAO。
*   **经济激励驱动**: 系统的核心是"激励相容"。我们通过精心设计的经济模型，使个人利益（获得奖励）与集体利益（维护平台环境）保持一致。
*   **透明与可验证**: 所有治理与仲裁的关键流程，包括投票和裁决，都将记录在链上，任何人都可以公开验证，确保过程的公正性。

### 8.2. 核心角色与职责

| 角色 | 资格 | 核心职责 |
| :--- | :--- | :--- |
| **普通用户** | 连接钱包即可 | 浏览、交易、以及对可疑商品发起**举报**。 |
| **陪审员 (Juror)** | 质押平台代币 `$DMT` | 参与被举报案件的**审查与投票**，是社区治理的核心力量。 |
| **治理委员会** | 多重签名钱包的持有者 (初期) | 负责引导系统、处理极端争议，以及执行社区投票通过的协议升级。 |

### 8.3. 去中心化内容审查流程

以下流程图详细说明了从举报到裁决的全过程，该过程将由智能合约驱动。

```mermaid
graph TD
    A[用户发现违规商品] --> B{发起举报并质押少量USDT};
    B --> C[案件生成，进入仲裁池];
    C --> D{智能合约从陪审员池中<br/>随机抽取7名陪审员};

    subgraph 仲裁阶段 (48小时)
        D --> E[向陪semicolon员和被举报者开放证据提交];
        E --> F{陪审员匿名投票<br/>(Commit-Reveal Scheme)};
    end

    F --> G{统计投票结果};
    G -- 违规票 > 多数阈值 --> H[裁决: 违规];
    G -- 违规票 <= 多数阈值 --> I[裁决: 不违规];

    subgraph 执行与结算
        H --> J[1. 商品从前端移除<br/>2. 卖家信誉降低/罚款<br/>3. 举报者退还本金+获利<br/>4. 陪审员分享奖励];
        I --> K[1. 商品保留<br/>2. 举报者损失质押金<br/>3. 质押金一部分补偿卖家<br/>4. 另一部分奖励陪审员];
    end
```

### 8.4. 激励模型与平台代币 ($DMT)

为保证治理体系的有效运转，平台需要引入原生代币 `$DMT`。

*   **质押以参与 (Stake-to-Participate)**: 用户必须质押一定数量的 `$DMT` 才能成为陪审员池的一员。质押量与被选中概率正相关（有上限），这保证了陪审员与平台的利益深度绑定。
*   **奖励诚实行为 (Reward for Honesty)**: 陪审员成功参与一次"正确"的裁决（即投票给最终的多数方），将获得 `$DMT` 作为奖励。
*   **惩罚恶意/懒惰行为 (Slashing for Malice/Laziness)**:
    *   **懒惰**: 在规定时间内未投票的陪审员，其部分质押金将被扣罚 (Slashing)。
    *   **恶意**: 持续与最终裁决结果不一致的陪审员，其信誉分会降低，未来被选中的概率也会下降，甚至可能面临更严厉的扣罚。
*   **价值捕获**: `$DMT` 的需求与平台的繁荣度直接挂钩。平台交易越活跃，潜在的争议和治理需求就越多，对陪审员服务的需求也就越大，从而推动了对 `$DT` 的质押需求。 

# DeMart 线框图 (Wireframes)

> 本文档使用文字和结构化描述来定义 DeMart 应用的核心页面线框图。

---

## 1. 认证页面 (Authentication Pages)

### 1.1 注册页面 (Register)

**目标**: 提供简洁、友好的注册界面，让用户快速创建账户。

```
+----------------------------------------------------------------------+
|                                                                      |
|                    +--------------------------------+                 |
|                    |           DeMart               |                 |
|                    |    欢迎加入 DeMart 👋          |                 |
|                    |  创建账户开启您的交易之旅 ✨     |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         [表单卡片]              |                 |
|                    | 邮箱                           |                 |
|                    | [✉️ name@example.com]          |                 |
|                    |                               |                 |
|                    | 密码                           |                 |
|                    | [🔒 输入密码]                   |                 |
|                    |                               |                 |
|                    | 确认密码                        |                 |
|                    | [🔒 再次输入密码]                |                 |
|                    |                               |                 |
|                    | [创建账户 🚀]                   |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    已有账户？[立即登录]                               |
|                                                                      |
+----------------------------------------------------------------------+
```

### 1.2 登录页面 (Login)

**目标**: 为已有账户的用户提供快速登录入口。

```
+----------------------------------------------------------------------+
|                                                                      |
|                    +--------------------------------+                 |
|                    |           DeMart               |                 |
|                    |        欢迎回来 👋              |                 |
|                    |    登录您的账户继续交易 💫       |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         [表单卡片]              |                 |
|                    | 邮箱                           |                 |
|                    | [✉️ name@example.com]          |                 |
|                    |                               |                 |
|                    | 密码                           |                 |
|                    | [🔒 输入密码]                   |                 |
|                    |                               |                 |
|                    | [登录 🔑]                      |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    还没有账户？[立即注册]                               |
|                                                                      |
+----------------------------------------------------------------------+
```

## 2. 个人资料页面 (Profile Settings)

**目标**: 让用户可以方便地管理个人信息和账户设置。

```
+----------------------------------------------------------------------+
| [导航栏]                                                              |
+----------------------------------------------------------------------+
|                                                                      |
|                    +--------------------------------+                 |
|                    |         个人资料                |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         [个人资料卡片]           |                 |
|                    |                               |                 |
|                    | [大头像]                       |                 |
|                    | [更换头像]                      |                 |
|                    |                               |                 |
|                    | 邮箱                           |                 |
|                    | [已验证邮箱 - 禁用]              |                 |
|                    |                               |                 |
|                    | 昵称                           |                 |
|                    | [输入框]                       |                 |
|                    |                               |                 |
|                    | [保存修改]                      |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         地址管理                |                 |
|                    | [添加新地址]                    |                 |
|                    |                               |                 |
|                    | [地址列表]                      |                 |
|                    | - 地址1 [编辑] [删除] [默认]      |                 |
|                    | - 地址2 [编辑] [删除] [设为默认]   |                 |
|                    +--------------------------------+                 |
|                                                                      |
+----------------------------------------------------------------------+
```

## 3. 聊天界面 (Chat Interface)

**目标**: 提供流畅的买卖双方沟通体验，支持价格协商和快速下单。

```
+----------------------------------------------------------------------+
| [< 返回]  [@用户名]                                    [•••]           |
+----------------------------------------------------------------------+
| +------------------------------------------------------------------+ |
| | [商品图片] [商品标题]                                               | |
| | [当前价格: xxx USDC]                              [立即购买/修改价格] | |
| +------------------------------------------------------------------+ |
+----------------------------------------------------------------------+
|                                                                      |
|   [时间: 2024-01-17 10:30]                                          |
|                                                                      |
|   +--------------------------------+                                 |
|   | 你好，这个商品还在吗？           |                                 |
|   +--------------------------------+                                 |
|                                                                      |
|                   [系统消息: 卖家已将价格修改为 95.00 USDC]            |
|                                                                      |
|                                    +--------------------------------+ |
|                                    | 是的，已经修改了价格，可以购买了  | |
|                                    +--------------------------------+ |
|                                                                      |
+----------------------------------------------------------------------+
| [📎] [输入消息...]                                          [发送]     |
+----------------------------------------------------------------------+
```

## 4. 订单相关页面

### 4.1 订单确认页 (Order Confirmation)

**目标**: 让买家确认订单信息并完成支付。

```
+----------------------------------------------------------------------+
| [< 返回购物]                                                          |
+----------------------------------------------------------------------+
|                                                                      |
|                    +--------------------------------+                 |
|                    |         确认订单                |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         商品信息                |                 |
|                    | [商品图片]                      |                 |
|                    | [商品标题]                      |                 |
|                    | [卖家: @用户名]                 |                 |
|                    | [价格: xxx USDC]               |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         收货地址                |                 |
|                    | [选择已有地址 v]                |                 |
|                    | 或 [添加新地址]                 |                 |
|                    |                               |                 |
|                    | [已选地址详情]                  |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         支付信息                |                 |
|                    | 商品金额: xxx USDC              |                 |
|                    | 平台费用: 0 USDC                |                 |
|                    | ----------------------         |                 |
|                    | 总计: xxx USDC                 |                 |
|                    |                               |                 |
|                    | [确认支付]                      |                 |
|                    +--------------------------------+                 |
|                                                                      |
+----------------------------------------------------------------------+
```

### 4.2 订单列表页 (Order List)

**目标**: 提供用户查看和管理订单的统一入口。

```
+----------------------------------------------------------------------+
| [导航栏]                                                              |
+----------------------------------------------------------------------+
|                                                                      |
|                    +--------------------------------+                 |
|                    |         我的订单                |                 |
|                    +--------------------------------+                 |
|                                                                      |
| [全部] [待付款] [待发货] [待收货] [已完成] [已取消]                     |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         订单卡片                |                 |
|                    | 订单号: #123456                 |                 |
|                    | [商品图片] [商品标题]            |                 |
|                    | 卖家: @用户名                   |                 |
|                    | 金额: xxx USDC                 |                 |
|                    | 状态: [待付款]                  |                 |
|                    | [查看详情] [付款] [取消订单]      |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         订单卡片                |                 |
|                    | ...                           |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    [加载更多...]                                      |
|                                                                      |
+----------------------------------------------------------------------+
```

### 4.3 订单详情页 (Order Details)

**目标**: 展示订单的完整信息和操作入口。

```
+----------------------------------------------------------------------+
| [< 返回订单列表]                                                       |
+----------------------------------------------------------------------+
|                                                                      |
|                    +--------------------------------+                 |
|                    |         订单详情                |                 |
|                    | 订单号: #123456                 |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         订单状态                |                 |
|                    | [大图标: 当前状态]               |                 |
|                    | [状态进度条]                    |                 |
|                    | 下一步: xxx                    |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         商品信息                |                 |
|                    | [商品图片] [商品标题]            |                 |
|                    | 卖家: @用户名                   |                 |
|                    | 金额: xxx USDC                 |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         收货信息                |                 |
|                    | 收货人: xxx                    |                 |
|                    | 电话: xxx                      |                 |
|                    | 地址: xxx                      |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         交易信息                |                 |
|                    | 创建时间: xxx                   |                 |
|                    | 付款时间: xxx                   |                 |
|                    | 发货时间: xxx                   |                 |
|                    | 完成时间: xxx                   |                 |
|                    |                               |                 |
|                    | [主要操作按钮]                  |                 |
|                    | [次要操作按钮]                  |                 |
|                    +--------------------------------+                 |
|                                                                      |
+----------------------------------------------------------------------+
```

## 5. 浏览历史页面 (Browse History)

**目标**: 展示用户最近浏览过的商品，方便用户回顾和再次查看感兴趣的商品。

```
+----------------------------------------------------------------------+
| [导航栏]                                                              |
+----------------------------------------------------------------------+
|                                                                      |
|                    +--------------------------------+                 |
|                    |         浏览记录                |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    [清空全部记录]                                      |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         商品卡片                |                 |
|                    | [商品图片]                      |                 |
|                    | [商品标题]                      |                 |
|                    | 价格: xxx USDC                 |                 |
|                    | 浏览时间: 2024-08-05 15:30      |                 |
|                    | [查看详情] [删除]                |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    +--------------------------------+                 |
|                    |         商品卡片                |                 |
|                    | [商品图片]                      |                 |
|                    | [商品标题]                      |                 |
|                    | 价格: xxx USDC                 |                 |
|                    | 浏览时间: 2024-08-05 14:20      |                 |
|                    | [查看详情] [删除]                |                 |
|                    +--------------------------------+                 |
|                                                                      |
|                    [加载更多...]                                      |
|                                                                      |
+----------------------------------------------------------------------+
```

---

## 其他页面保持不变...

[其他现有页面的线框图保持不变]

# DeMart 技术栈选型

本文档定义了 DeMart（去中心化市场）项目的核心技术栈。该技术栈的选择旨在实现快速开发、高安全性和卓越的用户体验。

## 核心原则

- **去中心化**: 尽可能减少对中心化服务器的依赖。
- **用户体验**: 提供与现代Web2应用相媲美的流畅体验。
- **安全性**: 智能合约和前端代码都必须经过严格审计和测试。
- **可扩展性**: 技术选择应支持未来的功能扩展和性能优化。

## 技术栈概览

| 类别 | 技术 | 理由 |
| :--- | :--- | :--- |
| **智能合约** | Solidity | EVM生态系统中最成熟、最主流的智能合约语言。 |
| **开发框架** | Hardhat | 强大的本地开发、测试和部署环境，与JavaScript生态系统无缝集成。 |
| **前端框架** | Next.js (React) | 提供静态生成(SSG)和服务器端渲染(SSR)，对SEO友好，性能卓越。 |
| **Web3库** | wagmi + viem | 现代化的React Hooks库，极大地简化了钱包连接、合约交互和链上数据获取。 |
| **去中心化存储** | IPFS | 用于存储商品图片和元数据，通过内容寻址，降低链上存储成本。 |
| **CSS框架** | Tailwind CSS | Utility-first框架，可以快速构建任何设计，轻松将我们的原型设计转化为代码。 |
| **组件库** | Shadcn/ui | 设计精美、可访问性好的组件集合，与Tailwind CSS完美结合，可定制性强。 |

---

## 详细说明

### 1. 智能合约: Solidity + Hardhat

- **Solidity**: 作为以太坊虚拟机（EVM）兼容链的事实标准，Solidity拥有最广泛的社区支持、最丰富的开发工具和经过实战检验的库（如OpenZeppelin）。
- **Hardhat**: 提供了一个完整的本地以太坊开发环境。它的插件系统非常强大，可以轻松集成Ethers.js、Waffle等工具进行自动化测试和部署脚本编写。

### 2. 前端: Next.js + wagmi + viem

- **Next.js**: 基于React，但功能更强大。我们可以利用它的静态生成能力为商品列表页创建快速加载的静态页面，同时为用户个人资料等动态内容使用服务器端渲染或客户端渲染。
- **wagmi/viem**: `viem`是一个非常轻量和高效的以太坊交互工具，而`wagmi`则在此基础上提供了全面的React Hooks。这套组合让处理钱包状态、发送交易、与合约交互等变得前所未有地简单和类型安全。

### 3. 去中心化存储: IPFS

商品图片、描述等大数据不适合直接存储在区块链上（成本极高）。
- **IPFS (InterPlanetary File System)** 是一个点对点的分布式文件系统。我们可以将文件上传到IPFS，然后只将返回的唯一哈希（CID）存储在智能合约中。
- 为了确保文件的持久性，我们会使用**Pinning服务**（如Pinata或Infura IPFS）。

### 4. UI/UX: Tailwind CSS + 组件库

选择一个合适的组件库可以极大地提升开发效率和UI的一致性。所有以下推荐的库都与 Tailwind CSS 深度集成，避免了传统组件库（如MUI）与Tailwind混用时可能出现的样式冲突和冗余。

- **Tailwind CSS**: 核心选择。我们可以将`custom.css`中的样式逻辑，用Tailwind的原子类进行重构。这会使得样式代码更内联、更可维护，并且更容易实现响应式设计。

#### 组件库选项

我们有几个优秀的选择，各有优劣：

**1. Shadcn/ui (首选推荐)**

-   **模式**: 这不是一个传统的NPM组件库。你通过CLI将单个组件的源代码直接复制到你的项目中。
-   **优点**:
    -   **完全所有权**: 代码就在你的项目里，你可以随心所欲地修改它，没有黑盒。
    -   **高度可定制**: 基于Radix UI（提供无障碍和行为）和Tailwind CSS构建，完美契合我们的技术栈。
    -   **设计优秀**: 预设样式简洁现代，非常容易调整以匹配我们的 `design_system.md`。
-   **缺点**: 需要自己管理组件代码的更新。

**2. NextUI (备选方案 A: "开箱即用")**

-   **模式**: 传统的NPM库 (`npm install @nextui-org/react`)。
-   **优点**:
    -   **设计精美**: 提供大量预设好样式的精美组件，可以快速搭建漂亮的界面。
    -   **专为Next.js优化**: 保证了与Next.js的SSR/SSG功能的良好兼容性。
    -   **API易用**: 开发体验非常流畅。
-   **缺点**: 虽然可定制，但自由度低于Shadcn/ui，更适合接受其设计体系的项目。

**3. Headless UI (备选方案 B: "完全控制")**

-   **模式**: NPM库，提供无样式的逻辑组件 (`npm install @headlessui/react`)。
-   **优点**:
    -   **最大自由度**: 只提供功能和无障碍性（A11y），视觉效果完全由你通过Tailwind CSS来定义。
    -   **官方支持**: 由Tailwind CSS团队开发，保证最佳实践和兼容性。
-   **缺点**: 前期工作量最大，因为每个组件都需要从头开始设计样式。

**4. DaisyUI (备选方案 C: "快速简便")**

-   **模式**: Tailwind CSS插件 (`npm install daisyui`)。
-   **优点**:
    -   **极致简单**: 只需在 `tailwind.config.js` 中添加一个插件即可。
    -   **语义化Class**: 提供 `card`, `btn` 等class，代码更简洁。
-   **缺点**: 定制性最差，更适合内部工具或对UI定制要求不高的项目。

**结论**:

- 选择 Shadcn/ui 

## 下一步

# DeMart 设计系统 (Design System)

> **版本**: 1.0
> **状态**: `进行中`
> **目标**: 本文档定义了 DeMart 平台的视觉语言、设计原则和 UI 组件规范，旨在确保品牌一致性、提升开发效率并提供卓越的用户体验。

---

## 1. 设计哲学与愿景 (Design Philosophy & Vision)

我们的设计遵循三大核心原则，旨在将 DeMart 打造成一个既美观又值得信赖的去中心化市场。

*   **现代 (Modern)**
    *   **界面**: 采用简洁、干净的布局，拥有充足的留白，避免信息过载。
    *   **元素**: 使用柔和的阴影、优雅的圆角和清晰的排版，创造出一种轻盈、现代的感觉。
    *   **目标**: 吸引并留住习惯了现代Web应用的用户，即使在Web3世界里也能提供一流的视觉体验。

*   **值得信赖 (Trustworthy)**
    *   **清晰度**: 所有交互和信息展示都必须是清晰、无歧义的。用户需要明确知道点击一个按钮会发生什么。
    *   **一致性**: 在整个平台中重复使用相同的设计模式和组件，建立用户的熟悉感和安全感。
    *   **色彩**: 使用稳定、可靠的蓝色作为主色调，辅以代表成功的绿色，从心理学层面构建用户的信任。

*   **易用 (User-Friendly)**
    *   **引导性**: 通过视觉层级和重点突出，自然地引导用户完成核心操作，如发布商品、购买、连接钱包等。
    *   **可访问性**: 确保足够的色彩对比度，为不同能力的用户提供良好的体验。
    *   **目标**: 极大地降低Web3的操作门槛，让不熟悉区块链的用户也能感到自如和便捷。

---

## 2. 品牌色板 (Color Palette)

色彩是构建品牌识别和用户体验的基础。DeMart 的色板经过精心选择，以传达我们的核心价值。

### 2.1. 主色与辅色 (Primary & Accent)

| 颜色 | 用途 | HEX 色值 | 预览 |
| :--- | :--- | :--- | :--- |
| **Primary (主色)** | 用于关键操作按钮、链接、高亮状态和品牌标识。代表科技、稳定与信任。 | `#4A90E2` | 🔵 |
| **Accent (辅色)** | 用于强化的行动号召（如"确认购买"）、成功状态和促销活动。代表活力与成功。 | `#50E3C2` | 🟢 |
### 2.2. 中性色 (Neutrals)

中性色构成了界面的骨架，用于文本、背景、边框和分割线。

| 颜色                 | 用途                                             | HEX 色值 | 预览 |
| :------------------- | :----------------------------------------------- | :------- | :--- |
| **Rich Black**       | 主要标题 (H1, H2)，用于需要最强视觉重点的文本。  | `#1A202C`  | ⚫️   |
| **Body Text**        | 正文、段落文本，保证最佳的可读性。                 | `#4A5568`  | ⚫️   |
| **Subtle Text**      | 辅助性文字、提示信息、占位符文本。                 | `#718096`  | ⚫️   |
| **Border / Divider** | 卡片边框、分割线，用于划分界面区域。               | `#E2E8F0`  | ⚪️   |
| **White**            | 页面背景、卡片、模态框等元素的背景色。             | `#FFFFFF`  | ⚪️   |

### 2.3. 功能色 (System Colors)

功能色用于向用户传达特定的系统状态信息，如成功、警告或错误。

| 颜色 | 用途 | HEX 色值 | 预览 |
| :--- | :--- | :--- | :--- |
| **Success (成功)** | 交易成功提示、验证通过。 | `#38A169` | 🟢 |
| **Warning (警告)** | 需要用户注意的提示，如"Gas费可能较高"。 | `#D69E2E` | 🟡 |
| **Error (错误)** | 交易失败、输入错误、危险操作。 | `#E53E3E` | 🔴 |

---

## 3. 字体与排版 (Typography)

一致的排版系统是保证信息可读性和界面美观度的核心。我们选择现代、清晰且开源的字体，以确保在所有设备上都有出色的表现。

### 3.1. 字体家族 (Font Family)

*   **主字体**: `Inter`
    *   **理由**: Inter 是一个专为计算机屏幕设计的无衬线字体，具有极高的清晰度和可读性。它拥有多种字重，非常适合UI设计。开源免费，便于商业使用。
    *   **备用字体**: `sans-serif`。当 `Inter` 无法加载时，使用系统默认的无衬线字体。

### 3.2. 字号层级与样式 (Type Scale & Styles)

我们定义了一个响应式的、以 `rem` 为单位的字号层级，以保证可访问性。`(1rem = 16px)`

| 元素 / 用途 | 字号 (font-size) | 字重 (font-weight) | 行高 (line-height) | 颜色 |
| :--- | :--- | :--- | :--- | :--- |
| **H1 / 页面主标题** | `2.25rem` (36px) | `700` (Bold) | `2.5rem` (40px) | `Rich Black` |
| **H2 / 区域大标题** | `1.5rem` (24px) | `600` (Semi-Bold) | `2rem` (32px) | `Rich Black` |
| **H3 / 卡片、模态框标题** | `1.25rem` (20px) | `600` (Semi-Bold) | `1.75rem` (28px)| `Rich Black` |
| **H4 / 小节标题** | `1rem` (16px) | `600` (Semi-Bold) | `1.5rem` (24px) | `Rich Black` |
| **Body / 正文** | `1rem` (16px) | `400` (Regular) | `1.5rem` (24px) | `Body Text` |
| **Body (Bold)** | `1rem` (16px) | `700` (Bold) | `1.5rem` (24px) | `Body Text` |
| **Caption / 辅助说明** | `0.875rem` (14px) | `400` (Regular) | `1.25rem` (20px)| `Subtle Text` |
| **Button / 按钮文本** | `1rem` (16px) | `500` (Medium) | `1.5rem` (24px) | `White` / `Primary` |
| **Link / 链接文本** | `1rem` (16px) | `500` (Medium) | `1.5rem` (24px) | `Primary` |

---

## 4. 核心组件样式 (Component Styling)

本章节将抽象的原子（颜色、字体）组合成具体、可复用的UI组件。每个组件的规范都将包含其视觉样式、尺寸、交互状态等，为开发提供精确指导。

### 4.1. 按钮 (Button)

按钮是与用户进行交互的最核心元素。我们提供三种主要类型的按钮，以适应不同的业务场景和视觉优先级。

#### 4.1.1. 主按钮 (Primary Button)

用于最主要的用户操作，如"连接钱包"、"发布商品"、"立即购买"。

| 属性 | 值 | 备注 |
| :--- | :--- | :--- |
| **背景色** | `Primary` (`#4A90E2`) | |
| **文字颜色** | `White` (`#FFFFFF`) | |
| **字体** | 见 `Button` 文本样式 | `16px`, `Medium` |
| **内边距 (Padding)** | `0.75rem 1.5rem` (12px 24px) | 上下 12px, 左右 24px |
| **圆角 (Border-radius)**| `0.5rem` (8px) | |
| **边框 (Border)** | `none` | |
| **阴影 (Box-shadow)** | `0 4px 6px -1px rgba(0, 0, 0, 0.1)` | 提供轻微的立体感 |
| **过渡 (Transition)** | `all 0.2s ease-in-out` | 使状态变化更平滑 |

**状态 (States):**
*   **悬浮 (Hover)**:
    *   背景色变亮: `filter: brightness(1.1)`
    *   阴影增强: `box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1)`
    *   鼠标指针: `cursor: pointer`
*   **点击 (Active)**:
    *   背景色变暗: `filter: brightness(0.95)`
    *   移除阴影，轻微下沉: `transform: translateY(1px)`
*   **禁用 (Disabled)**:
    *   背景色: `Subtle Text` (`#718096`) 的半透明版 `rgba(113, 128, 150, 0.5)`
    *   文字颜色: `White` 的半透明版 `rgba(255, 255, 255, 0.7)`
    *   移除阴影，鼠标指针: `cursor: not-allowed`

#### 4.1.2. 次要按钮 (Secondary Button)

用于次级操作，如"取消"、"查看详情"、"保存草稿"。

| 属性 | 值 | 备注 |
| :--- | :--- | :--- |
| **背景色** | `White` (`#FFFFFF`) | |
| **文字颜色** | `Primary` (`#4A90E2`) | |
| **边框** | `1px solid` `Primary` (`#4A90E2`) | |
| **其他属性** | 同主按钮 (内边距, 圆角, 字体等) | |

**状态 (States):**
*   **悬浮 (Hover)**:
    *   背景色: `Primary` (`#4A90E2`) 的极浅版 `rgba(74, 144, 226, 0.05)`
*   **禁用 (Disabled)**:
    *   背景色: `White`
    *   文字颜色: `Subtle Text` 的半透明版 `rgba(113, 128, 150, 0.5)`
    *   边框颜色: `Border / Divider` (`#E2E8F0`)

#### 4.1.3. 文本按钮 (Text Button)

用于最低优先级的操作，或需要融入文本流中的操作，如"了解更多"。

| 属性 | 值 | 备注 |
| :--- | :--- | :--- |
| **背景色** | `transparent` (透明) | |
| **文字颜色** | `Primary` (`#4A90E2`) | |
| **其他属性** | 无边框，无阴影 | |

**状态 (States):**
*   **悬浮 (Hover)**:
    *   文字增加下划线: `text-decoration: underline`

---

### 4.2. 商品卡片 (Product Card)

商品卡片是 DeMart 视觉传达的核心，用于在网格布局中吸引用户并展示商品概览。

| 属性 | 值 | 备注 |
| :--- | :--- | :--- |
| **背景色** | `White` (`#FFFFFF`) | |
| **宽度 (Width)** | `~280px` (示例) | 具体宽度将由网格布局决定，以实现响应式 |
| **圆角 (Border-radius)**| `1rem` (16px) | 较大的圆角，营造亲和感 |
| **边框 (Border)** | `1px solid` `Border / Divider` (`#E2E8F0`) | |
| **阴影 (Box-shadow)** | `0 4px 6px -1px rgba(74, 144, 226, 0.05)` | 使用主色的极淡版本作为阴影，更具品牌感 |
| **过渡 (Transition)** | `all 0.3s cubic-bezier(0.4, 0, 0.2, 1)` | 平滑的动画效果 |
| **布局 (Layout)** | Flexbox (column) | 内部元素垂直排列 |

#### 组件构成:

1.  **图片区 (Image Area)**
    *   **高度**: `~200px` (示例)
    *   **图片样式**: `object-fit: cover`，确保图片填满区域而不变形。
    *   **圆角**: 仅上半部分有圆角，与卡片顶部对齐。`border-top-left-radius: 16px; border-top-right-radius: 16px;`

2.  **内容区 (Content Area)**
    *   **内边距 (Padding)**: `1rem` (16px)
    *   **商品标题 (Title)**:
        *   字体样式: `H4 / 小节标题` (`16px`, `Semi-Bold`)
        *   颜色: `Rich Black` (`#1A202C`)
        *   **截断处理**: 最多显示两行，超出部分用 `...` 表示。
    *   **价格 (Price)**:
        *   字体样式: `Body (Bold)` (`16px`, `Bold`)
        *   颜色: `Primary` (`#4A90E2`)
    *   **卖家信息 (Seller Info)**:
        *   布局: `Flexbox` (row), `align-items: center`
        *   **头像**: `24px x 24px`, 圆形
        *   **昵称**: 字体样式 `Caption` (`14px`, `Regular`)，颜色 `Subtle Text` (`#718096`)
        *   **间距**: 头像和昵称之间有 `8px` 的间距。

#### 状态 (States):

*   **悬浮 (Hover)**:
    *   **transform**: `translateY(-4px)`，卡片轻微上移。
    *   **阴影增强**: `box-shadow: 0 12px 20px -4px rgba(74, 144, 226, 0.2)`
    *   **边框高亮**: `border-color: Primary` (`#4A90E2`)
    *   鼠标指针: `cursor: pointer`
*   **点击 (Active)**:
    *   **transform**: `translateY(-2px)`，上移效果减弱。
    *   **阴影减弱**: 悬浮阴影的更弱版本。

---

### 4.3. 输入框 (Input) 与 文本域 (Textarea)

表单元素是用户与平台进行数据交换的核心，其设计的清晰度和易用性至关重要。

| 属性 | 值 | 备注 |
| :--- | :--- | :--- |
| **背景色** | `White` (`#FFFFFF`) | |
| **文字颜色** | `Body Text` (`#4A5568`) | |
| **字体** | `Body` (`16px`, `Regular`) | |
| **内边距 (Padding)** | `0.75rem 1rem` (12px 16px) | |
| **圆角 (Border-radius)**| `0.5rem` (8px) | 与按钮圆角保持一致 |
| **边框 (Border)** | `1px solid` `Border / Divider` (`#E2E8F0`) | |
| **过渡 (Transition)** | `all 0.2s ease-in-out` | |

#### 占位符 (Placeholder)
*   **颜色**: `Subtle Text` (`#718096`)

#### 标签 (Label)
*   位于输入框上方。
*   **字体样式**: `Caption` (`14px`, `Regular`)，但字重为 `Medium`。
*   **颜色**: `Body Text` (`#4A5568`)
*   **与输入框间距**: `0.5rem` (8px)

#### 状态 (States):

*   **悬浮 (Hover)**:
    *   边框颜色: `Primary` 的浅色版 `rgba(74, 144, 226, 0.5)`
*   **聚焦 (Focus)**:
    *   边框颜色: `Primary` (`#4A90E2`)
    *   **阴影**: `box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2)`，创建辉光效果。
*   **错误 (Error)**:
    *   边框颜色: `Error` (`#E53E3E`)
    *   **阴影**: `box-shadow: 0 0 0 3px rgba(229, 62, 62, 0.2)`
    *   **错误提示信息**: 输入框下方会显示红色的辅助文字，说明错误原因。
*   **禁用 (Disabled)**:
    *   背景色: `Light Background` (`#F7FAFC`)
    *   文字颜色: `Subtle Text` (`#718096`)
    *   边框颜色: `Border / Divider` (`#E2E8F0`)
    *   鼠标指针: `cursor: not-allowed`
    
---
    
## 5. 图标库 (Iconography)

*   **库**: `Lucide Icons` (https://lucide.dev/)
*   **理由**:
    *   **风格一致**: 设计简洁、现代，与我们的整体风格完美匹配。
    *   **高可定制性**: 可以轻松调整大小、颜色和描边宽度。
    *   **Tree-shakable**: 与现代前端框架（如Next.js）配合良好，只会打包用到的图标，减小最终包体积。
*   **使用规范**:
    *   **默认尺寸**: `24px x 24px`
    *   **描边宽度**: `2px`
    *   **颜色**: 通常使用 `Subtle Text`，在活动状态下使用 `Primary`。

---

## 6. 布局与间距 (Layout & Spacing)

我们采用基于8的倍数的间距系统，以创建和谐、一致的视觉节奏。

*   **基础单位**: `0.25rem` (4px)
*   **常用间距**:
    *   `xx-small` (xs): `0.25rem` (4px) - 图标与文字间
    *   `x-small` (sm): `0.5rem` (8px) - 元素内部间距
    *   `small` (s): `1rem` (16px) - 卡片内边距
    *   `medium` (m): `1.5rem` (24px) - 组件之间
    *   `large` (l): `2rem` (32px) - 区域之间
    *   `x-large` (xl): `3rem` (48px) - 页面主内边距

---

## 7. 响应式设计 (Responsive Design)

我们定义了标准的断点，以确保在不同尺寸的设备上都能提供最佳的用户体验。

*   `sm`: `640px` (手机)
*   `md`: `768px` (平板)
*   `lg`: `1024px` (笔记本电脑)
*   `xl`: `1280px` (桌面显示器)

所有组件和布局都应考虑到这些断点，并作出相应的调整。 

---

