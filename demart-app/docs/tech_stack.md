# DeMart 技术栈选型

本文档定义了 DeMart（去中心化市场）项目的核心技术栈。该技术栈的选择旨在实现快速开发、高安全性和卓越的用户体验。

## 核心原则

- **去中心化**: 尽可能减少对中心化服务器的依赖。
- **用户体验**: 提供与现代Web2应用相媲美的流畅体验。
- **安全性**: 智能合约和前端代码都必须经过严格审计和测试。
- **可扩展性**: 技术选择应支持未来的功能扩展和性能优化。

## 技术栈概览

| 类别 | 技术 | 理由 |
| :--- | :--- | :--- |
| **智能合约** | Solidity | EVM生态系统中最成熟、最主流的智能合约语言。 |
| **开发框架** | Hardhat | 强大的本地开发、测试和部署环境，与JavaScript生态系统无缝集成。 |
| **前端框架** | Next.js (React) | 提供静态生成(SSG)和服务器端渲染(SSR)，对SEO友好，性能卓越。 |
| **Web3库** | wagmi + viem | 现代化的React Hooks库，极大地简化了钱包连接、合约交互和链上数据获取。 |
| **去中心化存储** | IPFS | 用于存储商品图片和元数据，通过内容寻址，降低链上存储成本。 |
| **CSS框架** | Tailwind CSS | Utility-first框架，可以快速构建任何设计，轻松将我们的原型设计转化为代码。 |
| **组件库** | Shadcn/ui | 设计精美、可访问性好的组件集合，与Tailwind CSS完美结合，可定制性强。 |

---

## 详细说明

### 1. 智能合约: Solidity + Hardhat

- **Solidity**: 作为以太坊虚拟机（EVM）兼容链的事实标准，Solidity拥有最广泛的社区支持、最丰富的开发工具和经过实战检验的库（如OpenZeppelin）。
- **Hardhat**: 提供了一个完整的本地以太坊开发环境。它的插件系统非常强大，可以轻松集成Ethers.js、Waffle等工具进行自动化测试和部署脚本编写。

### 2. 前端: Next.js + wagmi + viem

- **Next.js**: 基于React，但功能更强大。我们可以利用它的静态生成能力为商品列表页创建快速加载的静态页面，同时为用户个人资料等动态内容使用服务器端渲染或客户端渲染。
- **wagmi/viem**: `viem`是一个非常轻量和高效的以太坊交互工具，而`wagmi`则在此基础上提供了全面的React Hooks。这套组合让处理钱包状态、发送交易、与合约交互等变得前所未有地简单和类型安全。

### 3. 去中心化存储: IPFS

商品图片、描述等大数据不适合直接存储在区块链上（成本极高）。
- **IPFS (InterPlanetary File System)** 是一个点对点的分布式文件系统。我们可以将文件上传到IPFS，然后只将返回的唯一哈希（CID）存储在智能合约中。
- 为了确保文件的持久性，我们会使用**Pinning服务**（如Pinata或Infura IPFS）。

### 4. UI/UX: Tailwind CSS + 组件库

选择一个合适的组件库可以极大地提升开发效率和UI的一致性。所有以下推荐的库都与 Tailwind CSS 深度集成，避免了传统组件库（如MUI）与Tailwind混用时可能出现的样式冲突和冗余。

- **Tailwind CSS**: 核心选择。我们可以将`custom.css`中的样式逻辑，用Tailwind的原子类进行重构。这会使得样式代码更内联、更可维护，并且更容易实现响应式设计。

#### 组件库选项

我们有几个优秀的选择，各有优劣：

**1. Shadcn/ui (首选推荐)**

-   **模式**: 这不是一个传统的NPM组件库。你通过CLI将单个组件的源代码直接复制到你的项目中。
-   **优点**:
    -   **完全所有权**: 代码就在你的项目里，你可以随心所欲地修改它，没有黑盒。
    -   **高度可定制**: 基于Radix UI（提供无障碍和行为）和Tailwind CSS构建，完美契合我们的技术栈。
    -   **设计优秀**: 预设样式简洁现代，非常容易调整以匹配我们的 `design_system.md`。
-   **缺点**: 需要自己管理组件代码的更新。

**2. NextUI (备选方案 A: "开箱即用")**

-   **模式**: 传统的NPM库 (`npm install @nextui-org/react`)。
-   **优点**:
    -   **设计精美**: 提供大量预设好样式的精美组件，可以快速搭建漂亮的界面。
    -   **专为Next.js优化**: 保证了与Next.js的SSR/SSG功能的良好兼容性。
    -   **API易用**: 开发体验非常流畅。
-   **缺点**: 虽然可定制，但自由度低于Shadcn/ui，更适合接受其设计体系的项目。

**3. Headless UI (备选方案 B: "完全控制")**

-   **模式**: NPM库，提供无样式的逻辑组件 (`npm install @headlessui/react`)。
-   **优点**:
    -   **最大自由度**: 只提供功能和无障碍性（A11y），视觉效果完全由你通过Tailwind CSS来定义。
    -   **官方支持**: 由Tailwind CSS团队开发，保证最佳实践和兼容性。
-   **缺点**: 前期工作量最大，因为每个组件都需要从头开始设计样式。

**4. DaisyUI (备选方案 C: "快速简便")**

-   **模式**: Tailwind CSS插件 (`npm install daisyui`)。
-   **优点**:
    -   **极致简单**: 只需在 `tailwind.config.js` 中添加一个插件即可。
    -   **语义化Class**: 提供 `card`, `btn` 等class，代码更简洁。
-   **缺点**: 定制性最差，更适合内部工具或对UI定制要求不高的项目。

**结论**:

- 如果追求**长期可维护性和定制性**，**Shadcn/ui** 是最佳选择。
- 如果追求**开发速度和开箱即用的美观设计**，**NextUI** 是一个非常有吸引力的选择。
- 如果你是**设计纯粹主义者**，希望100%掌控代码，**Headless UI** 是你的不二之选。

## 下一步

确认最终的UI组件库后，我们就可以在项目根目录下开始搭建开发环境，首先从配置Next.js和Tailwind CSS开始。 